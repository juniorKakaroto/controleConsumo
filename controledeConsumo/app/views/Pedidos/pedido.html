#{extends 'main.html' /} #{set title:'Home' /} #{set title:'Pedido' /}


<div class="container">
	<div class="row">
		<div class="col">
			<fieldset class="shadow p-5 mb-5 bg-white rounded">

				<form action="@{Pedidos.addItem}">

					<input type="hidden" name="idPedido" value="${pedido.id}">

					<h3>Cliente: ${pedido.cliente.nome}</h3>
					<br />
					<div class="input-group mb-3">
						<div class="input-group-prepend">
							<label class="input-group-text" for="inputGroupSelect01">Produto</label>
						</div>
						<select class="custom-select" id="inputGroupSelect01"
							name="idItem"> 
							#{list items:itens, as:'i'}
							<option value="${i.id}">${i.nome}</option> 
							#{/list}
						</select>
					</div>

					<div class="input-group mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text" id="inputGroup-sizing-default">Quantidade</span>
						</div>
						<input type="number" class="form-control" name="qntItem" value="1" min="1">
					</div>

					<br /> <input class="btn btn-primary" type="submit"
						style="width: 100%; height: 50px; margin: auto;">
				</form>
			</fieldset>
		</div>


		<div class="col">
			<fieldset class="shadow p-5 mb-5 bg-white rounded"
				style="width: 100%; margin: auto;">

				<h4>Lista de produtos</h4>

				<table class="table table-sm">
					<thead>
						<tr>

							<th scope="col">Produto</th>
							<th scope="col">Quantidade</th>
							<th scope="col">Valor</th>
							<th scope="col"></th>
						</tr>
					</thead>
					<tbody>
						#{list items:pedido.pedidoItens, as:'p'}
						<tr>
							<td>${p.item.nome}</td>
							<td style="text-align: center;">${p.quantidade}</td>
							<td>${p.item.preco}</td>
						</tr>
						#{/list} #{else}
						<td>Nenhum produto adicionado</td> #{/else}
					</tbody>
				</table>
				<h5>Total Comanda: 0.0</h5>
			</fieldset>
		</div>
	</div>

	<hr />